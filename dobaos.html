// dobaos value that appears on bus
<script type="text/javascript">
  /*global RED*/
  RED.nodes.registerType('dobaos-value', {
    category: 'dobaos',
    inputs: 0,
    outputs: 1,
    color: "#E9967A",
    icon: "serial.svg",
    paletteLabel: "dobaos value",
    defaults: {
      name: {
        value: "dobaos value",
        required: false
      },
      datapoint: {
        value: "0",
        required: true
      },
    },
    label: function () {
      return this.name || this.topic || "dobaos value";
    }
  });
</script>

<script type="text/x-red" data-template-name="dobaos-value">
    <div class="form-row">
        <label for="node-input-name">Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-datapoint">Datapoint id/name</label>
        <input type="text" id="node-input-datapoint" placeholder="0">
    </div>
</script>

<script type="text/x-red" data-help-name="dobaos-value">
  <p>Datapoint value</p>
    <p>on certain datapoint value</p>
</script>

// now dobaos command
<script type="text/javascript">
  /*global RED*/
  RED.nodes.registerType('dobaos-method', {
    category: 'dobaos',
    inputs: 1,
    outputs: 1,
    color: "#E9967A",
    icon: "template.svg",
    paletteLabel: "dobaos method",
    defaults: {
      name: {
        value: "dobaos method",
        required: false
      },
      method: {
        value: "get value",
        required: true
      },
      payload: {
        value: "payload",
        required: true
      },
      payloadType: {
        value: "msg",
        required: true
      },
    },
    label: function () {
      return this.name || this.topic || "dobaos method";
    },
    oneditprepare: function () {
      $("#node-input-payload").typedInput({
        type:"msg",
        types:["msg", "flow","global", "json"],
        typeField: "#node-input-payloadType"
      });
    }
  });
</script>

<script type="text/x-red" data-template-name="dobaos-method">
    <div class="form-row">
        <label for="node-input-name">Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-method">Method</label>
        <select id="node-input-method">
            <option value="get description" selected>get description</option>
            <option value="get value">get value</option>
            <option value="get stored">get stored</option>
            <option value="read value">read value</option>
            <option value="set value">set value</option>
            <option value="put value">put value</option>
            <option value="get server items">get server items</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-payload">Payload</label>
        <input type="text" id="node-input-payload" placeholder="payload">
        <input type="hidden" id="node-input-payloadType">
    </div>
</script>

<script type="text/x-red" data-help-name="dobaos-method">
    <p>Redis out</p>
    <p>Send request to dobaos</p>
</script>
